<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>My Blogger Posts</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />

    <link rel="stylesheet" href="css/Chapter.css" />
    <link rel="stylesheet" href="css/blog.css" />
    <link rel="stylesheet" href="css/navbar.css" />
  </head>
  <body>
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
      <div class="container-fluid">
        <a class="navbar-brand">
          <img
            src="./assets/logo.png"
            alt="Logo"
            width="50"
            height="50"
            class="d-inline-block align-text-top"
          />
        </a>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="offcanvas"
          data-bs-target="#offcanvasNavbar"
          aria-controls="offcanvasNavbar"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse">
          <ul class="navbar-nav me-auto mb-2 mb-lg-0">
            <li class="nav-item">
              <a class="nav-link" aria-current="page" href="index.html"
                >Home</a
              >
            </li>
            <li class="nav-item">
              <a
                class="nav-link"
                aria-current="page"
                href="Academics.html"
                >Academics</a
              >
            </li>
            <li class="nav-item">
              <a
                class="nav-link"
                aria-current="page"
                href="Admission.html"
                >Admission</a
              >
            </li>

            <li class="nav-item">
              <a class="nav-link" href="Activities.html">Activities</a>
            </li>
            <li class="nav-item">
              <a class="nav-link active" href="Blog.html">News</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="Vision.html">Vision</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="Aboutus.html">About Us</a>
            </li>
          </ul>
          <!-- <form class="d-flex">
            <input
              class="form-control me-2"
              type="search"
              placeholder="Search"
              aria-label="Search"
            />
            <button class="btn btn-outline-success me-2" type="submit">
              Search
            </button>
          </form> -->

          <a class="btn btn-primary" href="Contact.html">Contact Us</a>
        </div>
      </div>
    </nav>

    <div
      class="offcanvas offcanvas-start"
      tabindex="-1"
      id="offcanvasNavbar"
      aria-labelledby="offcanvasNavbarLabel"
    >
      <div class="offcanvas-header">
        <h5 class="offcanvas-title" id="offcanvasNavbarLabel">TOP N' TOWN</h5>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="offcanvas"
          aria-label="Close"
        ></button>
      </div>
      <div class="offcanvas-body">
        <ul class="navbar-nav justify-content-end flex-grow-1 pe-3">
          <li class="nav-item">
            <a class="nav-link active" aria-current="page" href="index.html"
              >Home</a
            >
          </li>
          <li class="nav-item">
            <a class="nav-link active" aria-current="page" href="Academics.html"
              >Academics</a
            >
          </li>
          <li class="nav-item">
            <a class="nav-link active" aria-current="page" href="Admission.html"
              >Admission</a
            >
          </li>
          <li class="nav-item">
            <a class="nav-link" href="Activities.html">Activites</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="Blog.html">News & Blogs</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="Vision.html">Vision</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="Aboutus.html">About Us</a>
          </li>
        </ul>
        <!-- <form class="d-flex mt-3">
          <input
            class="form-control me-2"
            type="search"
            placeholder="Search"
            aria-label="Search"
          />
          <button class="btn btn-outline-success" type="submit">Search</button>
        </form> -->

        <a class="btn btn-primary mt-3" href="Contact.html">Contact Us</a>
      </div>
    </div>
    <div class="we">
      <div class="top">
        <h1>Blogs and News</h1>
      </div>
    </div>
    <div class="container mt-5">
      <h1 class="mb-4">My Blogger Posts</h1>
      <div id="blog-posts" class="row"></div>
    </div>
    <script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
    crossorigin="anonymous"
  ></script>
    <script>
      const apiKey = "AIzaSyBEGcJMviEcWu5rbgc4FhGPU8r8OAgkTY0";

      function getBlogPosts() {
        const blogId = "5207560492914432337";
        const url = `https://www.googleapis.com/blogger/v3/blogs/${blogId}/posts?key=${apiKey}`;

        fetch(url)
          .then((response) => response.json())
          .then((data) => {
            const blogPostsContainer = document.getElementById("blog-posts");
            blogPostsContainer.innerHTML = "";

            if (data.items && data.items.length > 0) {
              data.items.forEach((post) => {
                const blogPost = document.createElement("div");
                blogPost.classList.add("blog-post", "col-md-4", "col-sm-6");

                const card = document.createElement("div");
                card.classList.add("card", "h-100");

                const cardBody = document.createElement("div");
                cardBody.classList.add("card-body");

                const titleLink = document.createElement("a");
                titleLink.href = post.url;
                titleLink.classList.add("blog-post-title", "card-title");
                titleLink.textContent = post.title;

                const authorInfo = document.createElement("div");
                authorInfo.classList.add(
                  "d-flex",
                  "align-items-center",
                  "mb-2"
                );

                const authorImg = document.createElement("img");
                authorImg.src = post.author.image.url;
                authorImg.alt = post.author.displayName;

                const authorDetails = document.createElement("div");
                const authorName = document.createElement("span");
                authorName.classList.add("ms-2", "fw-bold");
                authorName.textContent = post.author.displayName;

                const postDate = document.createElement("div");
                postDate.classList.add("text-muted");
                const date = new Date(post.published);
                postDate.textContent = `Published on: ${date.toLocaleDateString()}`;

                authorDetails.appendChild(authorName);
                authorDetails.appendChild(postDate);
                authorInfo.appendChild(authorImg);
                authorInfo.appendChild(authorDetails);

                const excerpt = document.createElement("p");
                excerpt.classList.add("blog-post-excerpt", "card-text");

                // Create a temporary div to extract text content
                const tempDiv = document.createElement("div");
                tempDiv.innerHTML = post.content;
                const textContent =
                  tempDiv.textContent || tempDiv.innerText || "";
                excerpt.textContent = textContent.slice(0, 100) + "...";

                cardBody.appendChild(authorInfo);
                cardBody.appendChild(titleLink);
                cardBody.appendChild(excerpt);
                card.appendChild(cardBody);
                blogPost.appendChild(card);

                blogPostsContainer.appendChild(blogPost);
              });
            } else {
              const message = document.createElement("p");
              message.textContent = "No blog posts found.";
              blogPostsContainer.appendChild(message);
            }
          })
          .catch((error) => {
            console.error(error);
            const message = document.createElement("p");
            message.textContent = "Error fetching blog posts.";
            document.getElementById("blog-posts").appendChild(message);
          });
      }

      getBlogPosts();
    </script>
  </body>
  <!-- Footer Section -->
  <footer
    style="background-color: #2c3e50; color: #ecf0f1"
    class="text-center py-4"
  >
    <div class="container">
      <div class="row mb-4">
        <div class="col-md-12">
          <blockquote class="blockquote">
            <p class="mb-0">
              "शिक्षा सबसे शक्तिशाली हथियार है जिसका उपयोग आप दुनिया को बदलने के
              लिए कर सकते हैं।" - नेल्सन मंडेला
            </p>
          </blockquote>
        </div>
      </div>
      <hr style="border-top: 1px solid #ecf0f1" />
      <div class="row mt-3">
        <div class="col-12">
          <p class="mb-0">&copy; 2024 Our School. All rights reserved.</p>
        </div>
      </div>
    </div>
  </footer>
</html>
